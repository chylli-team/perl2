name: Build workflow
run-name: Build workflow
on:
  push:
    #pull_request:
concurrency:
  group: ${{ github.workflow }}-${{ github.ref }}-${{ github.head_ref || github.run_id }}
  cancel-in-progress: true
jobs:
  build:
    runs-on: ubuntu-latest # Maybe here is a blocker
    container:
      image: debian:bullseye
    defaults:
      run:
        shell: bash -le {0}
    permissions: write-all
    steps:
      - name: prepare 
        run: |
          apt-get update
          apt-get -y install git
          git config --global user.email "chylli@deriv.com"
          git config --global user.name "Chylli"
          git config --global --add safe.directory $PWD # ignore ownership problem
      - name: Checkout
        uses: actions/checkout@b4ffde65f46336ab88eb53be808477a3936bae11 #v4
      - name: push
        run: |
          git remote -v
          git commit --allow-empty -m "rebuild $VERSION [ci skip]";
          #git checkout -b $PR_OWNER/$PR_BRANCH # TODO move it to env
          git checkout -b test_branch
          #git remote add $PR_OWNER https://github.com/$PR_OWNER/$PR_REPONAME
          #git push $PR_OWNER $PR_BRANCH
          git push -f origin HEAD:test_branch

